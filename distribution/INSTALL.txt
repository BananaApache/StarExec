Installation Notes

This document describes how to describe Starexec and its
dependencies on a Linux system. 

********************************** Java ***************************************

Starexec depends on the Java 8 JDK and has been tested with version 1.8.0_u77.
Java 8 can be found at the site below or can be installed through various
package managers

http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html

********************************** Ant ****************************************

Starexec requires Ant to build, and has been tested with version 1.9.3. An
installation guide for Ant is below, or you may use any applicable package manager.

http://ant.apache.org/manual/install.html

********************************** Apache Tomcat ******************************

Starexec depends on Apache Tomcat 7.0.64. While newer versions may work, we have
frequently seen that even minor version releases of Tomcat can have breaking
changes for Starexec, so using a different version of Tomcat is not recommended.

A full release of Tomcat is included in the starexec package under the 'distribution'
directory. This is identical to a release that you can download from Apache,
with the exception that the mysql-connector-java-5.1.22-bin.jar file is included
in the lib directory. This .jar file is required for Starexec to connect to 
its database, and as such we recommend that you install Tomcat using the provided
archive. If you would like to install a clean copy of Tomcat, you will need to copy
the MySQL connector to the new lib directory.

If you install Tomcat using the provided archive, you may need to update permissions
on the install directory to make Tomcat's scripts executable. This can be done, for
example, by using 'chmod 700 -R tomcat_directory'


********************************** MySQL **************************************

StarExec depends on MySQL Community Server 5.5.49. It is possible that newer
versions may also work, but this can't be guaranteed. MySQL can be obtained
at

http://dev.mysql.com/downloads/mysql/

Clicking the button 'Looking for previous GA versions?' will allow you to
select version 5.5.49, and then you will need to select the appropriate
version based on the system you are installing on. Alternatively, you can
install MySQL through any package manager you may have available.

In starexec-config.xml, you must specify MYSQL_USERNAME and 
COMPUTE_NODE_MYSQL_USERNAME. These are MySQL users that must have access to the 
MySQL database. If desired, they can be the same user-- the only difference is that
COMPUTE_NODE_MYSQL_USERNAME requires fewer permissions. The user set as
MYSQL_USERNAME will require ALL permissions in the Starexec database, excluding
server administration permissions. The user COMPUTE_NODE_MYSQL_USERNAME will 
require SELECT, INSERT, UPDATE, and EXECUTE permissions.

A description of MySQL permissions can be found at the link below.

http://dev.mysql.com/doc/refman/5.7/en/privileges-provided.html

********************************** BACKEND ************************************

Starexec's backend refers to the utility that is responsible for accepting
new jobs from the web app and distributing them over the available compute nodes.
Starexec supports 3 different backend implementations, and which one you use
can be configured using the BACKEND_TYPE field in starexec-config.xml. You have
the option to use SGE (https://arc.liv.ac.uk/trac/SGE), OAR (https://oar.imag.fr/),
or a simple local backend implemented in Starexec itself.

To install SGE or OAR, you will need to refer to their documentation. In the case
of OAR, the document 'OAR installation notes.txt' describes extra installation
steps you should take to configure OAR for use with Starexec.


The local backend is a primitive solution if you only want to run jobs on the same
machine that Starexec is running off of. The local backend does not support multiple
queues or nodes, and only a single job will run at a time.

********************************** Email **************************************

Starexec sends automated emails for several purposes, such as sending notifications
when new users are registered or sending weekly status updates. To do this, Starexec
requires an email address that it can send emails from. In starexec-config.xml,
the EMAIL_USER field should be set to the email address to send from, and EMAIL_PWD,
EMAIL_SMTP, and EMAIL_SMTP_PORT should be set as decribed.

Any email server that supports SMTP can be used, but the default settings included
in the config file show how to use a Gmail account. The EMAIL_SMTP field is set
correctly for Gmail, and the SMTP_PORT field is set to 587, as Starexec uses
TLS. You should be able to use any desired Gmail account by plugging in your own
account and password. Note that Gmail may initially block the Starexec app from
sending mail until you log onto your account and confirm the activity. Moreover,
you may need to go into your Gmail account settings and allow access from less
secure apps. Creating a fresh Gmail account for sole use by Starexec may be
beneficial if you do not want to change your settings.

Starexec has been tested using Gmail, but other email servers should also work
provided you look up the correct SMTP server and port. Various settings may
need to be changed in other email providers as well.

Starexec is also configured to use a CONTACT_EMAIL, which is intended to
receive emails directed at Starexec admins. This email address will appear
on the site for users who want to send bug reports or ask questions.

********************************** Starexec Configuration **********************

After all of the above dependencies have been installed, you can take the following
steps to configure and deploy Starexec.

1) Under src/org/starexec/config you will see the file starexec-config.xml. This file
contains the bulk of Starexec configuration, including specifying Starexec data directories,
email settings, database connection settings, and several other items. You will need
to go through this file and configure Starexec as you want, according to the documentation
provided in that file.

2) In the top-level file local.properties, you will need to provide several configurable values.
These values are mostly identical to values in starexec-config.xml.

3) Run 'ant' at the top level. This will cause Ant to build starexec according to the rules
specified in build.xml.

4) In the deployed-sql directory, which should have been created by the Ant build, you
will need to execute the NewInstall.sql script in MySQL. This script will create the
Starexec database and stored procedures, along with creating a few data entries that
Starexec expects by default. For example, you can execute

mysql -u"username" -p"password" < NewInstall.sql